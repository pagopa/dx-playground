name: Deploy Azure Function V3
on:
  workflow_dispatch: null
  push:
    tags:
      - azure-function-v3@[0-9]+.[0-9]+.[0-9]+
permissions:
  contents: read
  id-token: write
jobs:
  deploy:
    uses: pagopa/dx/.github/workflows/release-azure-appsvc.yaml@19c975849e973ea0d3e43ed93c797a1b0addd02c
    name: Deploy Azure Function V3
    concurrency:
      group: ${{ github.workflow }}-cd
      cancel-in-progress: false
    secrets: inherit
    with:
      workspace_name: azure-function-v3
      environment: app-dev
      resource_group_name: dx-d-itn-test-rg-01
      web_app_name: dx-d-itn-playground-v3-func-01
      use_private_agent: true
      disable_auto_staging_deploy: true
